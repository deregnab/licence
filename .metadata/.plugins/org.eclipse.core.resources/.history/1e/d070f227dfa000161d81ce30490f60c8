package fil.coo.action;

import java.util.ArrayList;

import fil.coo.exception.ActionFinishedException;

public abstract class Action {

	protected int totalTime = 0;
	protected int remainingTime = 0;
	protected boolean isReady = true;
	protected boolean isInitialized = false;
	protected final ArrayList<Action> actions = new ArrayList<Action>();
	
	
	public Action(int timeToEnd) 
	{
		this.totalTime = timeToEnd;
	}
	
	protected  Action createAction(){
		return this;
	}
	
	
	
	public boolean isFinished() {
		if (this.totalTime == this.remainingTime)
		{
			this.isInitialized = false;
			return true;
		}
		else
			return false;
		}
	
	
	public void doStep() throws ActionFinishedException {

		if (this.isFinished())
			throw new ActionFinishedException();
		this.remainingTime++;
		if (this.isReady())
			this.isReady = false;
		this.isInitialized = true;
	}
	
	
	boolean isReady() {
		return this.isReady;

	}
	
	
	public boolean isInProgress() {
		return (!this.isReady() && !this.isFinished() && this.isInitialized);	}
	}

